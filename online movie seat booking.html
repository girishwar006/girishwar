<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamil Movie Booking System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .section-title {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .user-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .movie-card {
            border: 1px solid #e1e1e1;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .movie-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .movie-card.selected {
            border: 3px solid #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .movie-poster {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .movie-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .movie-card:hover .movie-poster img {
            transform: scale(1.1);
        }

        .movie-poster .image-fallback {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
        }

        .movie-poster .image-fallback i {
            font-size: 3em;
            margin-bottom: 10px;
            color: #999;
        }

        .movie-info {
            padding: 15px;
        }

        .movie-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .movie-details {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .movie-price {
            color: #667eea;
            font-weight: 600;
            font-size: 1.1em;
            margin-top: 10px;
        }

        .showtimes-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .showtime-item {
            padding: 15px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .showtime-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .showtime-item.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .seats-container {
            text-align: center;
        }

        .screen {
            background: #333;
            color: white;
            padding: 10px;
            margin: 20px 0;
            border-radius: 5px;
            font-weight: bold;
        }

        .seats-grid {
            display: inline-block;
            margin: 20px 0;
        }

        .seat-row {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }

        .seat {
            width: 30px;
            height: 30px;
            margin: 3px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .seat.available {
            background: #4CAF50;
            color: white;
        }

        .seat.booked {
            background: #f44336;
            color: white;
            cursor: not-allowed;
        }

        .seat.selected {
            background: #FFC107;
            color: #333;
            transform: scale(1.1);
        }

        .seat.available:hover {
            background: #45a049;
            transform: scale(1.1);
        }

        .booking-summary {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 8px;
        }

        .summary-item {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .summary-label {
            font-weight: 600;
            color: #555;
            min-width: 120px;
        }

        .summary-value {
            color: #333;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #4CAF50;
        }

        .notification.error {
            background: #f44336;
        }

        .hidden {
            display: none;
        }

        .step-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .payment-method {
            padding: 20px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-method:hover {
            border-color: #667eea;
        }

        .payment-method.selected {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        /* Special Features */

        .search-container {
            margin-bottom: 20px;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }

        .filter-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .movie-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .movie-rating {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
        }

        .movie-trailer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.9em;
            opacity: 0;
            transition: opacity 0.3s ease;
            cursor: pointer;
        }

        .movie-poster:hover .movie-trailer {
            opacity: 1;
        }

        .qr-code {
            text-align: center;
            margin: 20px 0;
        }

        .qr-code img {
            max-width: 200px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background: white;
        }

        .recommendations {
            margin-top: 30px;
        }

        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .recommendation-card {
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .recommendation-card:hover {
            transform: scale(1.05);
        }

        .recommendation-card img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }
        /* You Might Like Section */

        .you-might-like {
            margin-top: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
        }

        .you-might-like h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
            font-size: 1.8em;
        }

        .suggestion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .suggestion-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .suggestion-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .suggestion-poster {
            width: 100%;
            height: 150px;
            position: relative;
            overflow: hidden;
        }

        .suggestion-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .suggestion-card:hover .suggestion-poster img {
            transform: scale(1.1);
        }

        .suggestion-info {
            padding: 15px;
        }

        .suggestion-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        .suggestion-genre {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .suggestion-trailer {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.9em;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s ease;
        }

        .suggestion-trailer:hover {
            background: #5a6fd8;
        }
        /* Trailer Modal */

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            position: relative;
            overflow: hidden;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            color: white;
            cursor: pointer;
            z-index: 1002;
            background: rgba(0, 0, 0, 0.5);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .trailer-container {
            position: relative;
            padding-bottom: 56.25%;
            /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
        }

        .trailer-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .trailer-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #222;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .trailer-placeholder i {
            font-size: 3em;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .user-form {
                grid-template-columns: 1fr;
            }
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            .suggestion-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ Tamil Movie Booking System</h1>
            <p>Book your favorite Tamil movies with ease</p>
        </div>

        <!-- User Information Step -->
        <div id="step-user" class="card">
            <h2 class="section-title">üë§ User Information</h2>
            <div class="user-form">
                <div class="form-group">
                    <label for="userName">Full Name</label>
                    <input type="text" id="userName" class="form-control" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="userEmail">Email Address</label>
                    <input type="email" id="userEmail" class="form-control" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="userPhone">Phone Number</label>
                    <input type="tel" id="userPhone" class="form-control" placeholder="Enter your phone number">
                </div>
            </div>
            <button class="btn" onclick="validateUserInfo()">Continue to Movies</button>
        </div>

        <!-- Movie Selection Step -->
        <div id="step-movies" class="card hidden">
            <h2 class="section-title">üé≠ Select a Movie</h2>

            <!-- Search and Filter -->
            <div class="search-container">
                <input type="text" id="searchMovies" class="search-box" placeholder="Search for movies...">
            </div>

            <div class="filter-container">
                <div class="filter-btn active" data-filter="all">All</div>
                <div class="filter-btn" data-filter="Action">Action</div>
                <div class="filter-btn" data-filter="Thriller">Thriller</div>
                <div class="filter-btn" data-filter="Historical">Historical</div>
                <div class="filter-btn" data-filter="Heist">Heist</div>
            </div>

            <div id="moviesGrid" class="movies-grid">
                <!-- Movies will be populated by JavaScript -->
            </div>

            <!-- You Might Like Section -->
            <div class="you-might-like">
                <h2>üéØ You Might Also Like</h2>
                <div id="suggestionsGrid" class="suggestion-grid">
                    <!-- Suggestions will be populated by JavaScript -->
                </div>
            </div>

            <div class="step-navigation">
                <button class="btn" onclick="showStep('step-user')">‚Üê Back</button>
                <button class="btn" id="btnContinueShowtimes" disabled onclick="showStep('step-showtimes')">Continue to Showtimes ‚Üí</button>
            </div>
        </div>

        <!-- Showtime Selection Step -->
        <div id="step-showtimes" class="card hidden">
            <h2 class="section-title">üïê Select Showtime</h2>
            <div id="selectedMovieInfo" class="booking-summary"></div>
            <div id="showtimesList" class="showtimes-list">
                <!-- Showtimes will be populated by JavaScript -->
            </div>
            <div class="step-navigation">
                <button class="btn" onclick="showStep('step-movies')">‚Üê Back to Movies</button>
                <button class="btn" id="btnContinueSeats" disabled onclick="showStep('step-seats')">Continue to Seats ‚Üí</button>
            </div>
        </div>

        <!-- Seat Selection Step -->
        <div id="step-seats" class="card hidden">
            <h2 class="section-title">üí∫ Select Seats</h2>
            <div id="selectedShowtimeInfo" class="booking-summary"></div>
            <div class="seats-container">
                <div class="screen">üé¨ SCREEN THIS WAY üé¨</div>
                <div id="seatsGrid" class="seats-grid">
                    <!-- Seats will be populated by JavaScript -->
                </div>
                <div class="seat-legend" style="margin-top: 20px;">
                    <div style="display: inline-block; margin: 0 10px;">
                        <div class="seat available" style="display: inline-block;"></div> Available
                    </div>
                    <div style="display: inline-block; margin: 0 10px;">
                        <div class="seat booked" style="display: inline-block;"></div> Booked
                    </div>
                    <div style="display: inline-block; margin: 0 10px;">
                        <div class="seat selected" style="display: inline-block;"></div> Selected
                    </div>
                </div>
            </div>
            <div class="step-navigation">
                <button class="btn" onclick="showStep('step-showtimes')">‚Üê Back to Showtimes</button>
                <button class="btn" id="btnContinuePayment" disabled onclick="showStep('step-payment')">Continue to Payment ‚Üí</button>
            </div>
        </div>

        <!-- Payment Step -->
        <div id="step-payment" class="card hidden">
            <h2 class="section-title">üí≥ Payment</h2>
            <div id="bookingSummary" class="booking-summary"></div>

            <h3 style="margin: 20px 0 10px 0;">Select Payment Method</h3>
            <div class="payment-methods">
                <div class="payment-method" onclick="selectPaymentMethod('card')">
                    <h4>üí≥ Card</h4>
                    <p>Credit/Debit Card</p>
                </div>
                <div class="payment-method" onclick="selectPaymentMethod('upi')">
                    <h4>üì± UPI</h4>
                    <p>UPI Payment</p>
                </div>
                <div class="payment-method" onclick="selectPaymentMethod('wallet')">
                    <h4>üëõ Wallet</h4>
                    <p>Digital Wallet</p>
                </div>
            </div>

            <div id="paymentProcessing" class="hidden">
                <div class="loader"></div>
                <p style="text-align: center; margin-top: 10px;">Processing payment...</p>
            </div>

            <div class="step-navigation">
                <button class="btn" onclick="showStep('step-seats')">‚Üê Back to Seats</button>
                <button class="btn" id="btnProcessPayment" disabled onclick="processPayment()">Complete Booking</button>
            </div>
        </div>

        <!-- Confirmation Step -->
        <div id="step-confirmation" class="card hidden">
            <h2 class="section-title">‚úÖ Booking Confirmed!</h2>
            <div id="confirmationDetails"></div>

            <div class="qr-code">
                <h3>Your Digital Ticket</h3>
                <div id="qrCodeContainer"></div>
            </div>

            <div class="recommendations">
                <h3>You Might Also Like</h3>
                <div id="recommendationsGrid" class="recommendation-grid">
                    <!-- Recommendations will be populated by JavaScript -->
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="startNewBooking()">Book Another Movie</button>
            </div>
        </div>
    </div>

    <!-- Trailer Modal -->
    <div id="trailerModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeTrailerModal">&times;</span>
            <div class="trailer-container">
                <iframe id="trailerVideo" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <div id="trailerPlaceholder" class="trailer-placeholder hidden">
                    <i class="fas fa-film"></i>
                    <p>Trailer not available</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <script>
        // Mock data with movie posters and trailers - In a real application, this would come from your Java backend
        const movies = [{
            id: "M1",
            name: "Vikram",
            genre: "Action Thriller",
            duration: 175,
            price: 350,
            poster: "https://m.media-amazon.com/images/M/MV5BOTc4OGMxMGYtNjgyOC00YjVkLWIzMDgtZTJjZGE0MDc5M2FhXkEyXkFqcGdeQXVyMTEzNzg0Mjkx._V1_.jpg",
            trailer: "https://www.youtube.com/embed/OKBMCL-frPU",
            rating: 8.4,
            trending: true
        }, {
            id: "M2",
            name: "Jailer",
            genre: "Action",
            duration: 168,
            price: 350,
            poster: "https://m.media-amazon.com/images/M/MV5BZWI4YzA0ZWYtYjA5Ny00MDQ0LTliYTEtNGM1ZWNlNzU2Y2VjXkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_FMjpg_UX1000_.jpg",
            trailer: "https://www.youtube.com/embed/RR7K-_O0k78",
            rating: 7.1,
            trending: true
        }, {
            id: "M3",
            name: "Leo",
            genre: "Action",
            duration: 164,
            price: 350,
            poster: "https://m.media-amazon.com/images/M/MV5BYzNjM2Y2Y2MtN2U1Yi00MjZjLTllMDMtMGE1NDc3YzU4ZGUyXkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/Po3jStA673E",
            rating: 7.2,
            trending: false
        }, {
            id: "M4",
            name: "Don",
            genre: "Action",
            duration: 146,
            price: 300,
            poster: "https://m.media-amazon.com/images/M/MV5BOWYxYjY3MDAtY2NkYi00ODJmLWE0MDYtMTE0ODljZDNlMjU1XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/8765g7eoxpM",
            rating: 6.8,
            trending: false
        }, {
            id: "M5",
            name: "Thunivu",
            genre: "Heist Action",
            duration: 146,
            price: 300,
            poster: "https://m.media-amazon.com/images/M/MV5BNzQyY2FkMjktY2U0OC00Y2VlLThlMDItYTM5Y2M1NzI0NTU0XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_FMjpg_UX1000_.jpg",
            trailer: "https://www.youtube.com/embed/6yKDu5_ANc8",
            rating: 6.5,
            trending: false
        }, {
            id: "M6",
            name: "Ponniyin Selvan",
            genre: "Historical",
            duration: 167,
            price: 400,
            poster: "https://m.media-amazon.com/images/M/MV5BYjFkZjkzY2MtM2UwMy00YjVmLWJkYjUtMGIwNjZiY2U5ODI0XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_FMjpg_UX1000_.jpg",
            trailer: "https://www.youtube.com/embed/vbXT5l4qcw8",
            rating: 7.6,
            trending: true
        }, {
            id: "M7",
            name: "Master",
            genre: "Action Thriller",
            duration: 179,
            price: 300,
            poster: "https://m.media-amazon.com/images/M/MV5BYzBjYjViY2QtYjM5Yy00N2M3LWJkMWQtMDQ4NDA4NWU5ZTU2XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/UTiXQcrLlv4",
            rating: 7.8,
            trending: false
        }, {
            id: "M8",
            name: "Kaithi 2",
            genre: "Action Thriller",
            duration: 147,
            price: 350,
            poster: "https://m.media-amazon.com/images/M/MV5BZjE1MWM4YzQtZjU4OC00YzE5LWI5Y2ItYjI1YzQ3M2Y0N2Y0XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/gO6Qr6YVKqQ",
            rating: 8.2,
            trending: true
        }];

        // Additional movies for "You Might Like" section
        const suggestedMovies = [{
            id: "S1",
            name: "Indian 2",
            genre: "Action Thriller",
            poster: "https://m.media-amazon.com/images/M/MV5BODUyN2Y0YTQtYjRlZi00NDVjLWI5YjYtM2VjZjFmZjk3M2Y3XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/in6S9p73eOE"
        }, {
            id: "S2",
            name: "Captain Miller",
            genre: "Period Action",
            poster: "https://m.media-amazon.com/images/M/MV5BNjRkY2YyZjgtZGU0OC00Y2U4LWI4YzQtYjQ0ZjhkYjE4ZjU4XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/iyB7C2L4-3s"
        }, {
            id: "S3",
            name: "GOAT",
            genre: "Sports Drama",
            poster: "https://m.media-amazon.com/images/M/MV5BZmY0YzE1YjctYzUxOS00ZGM5LTg0NWQtNWU5Y2UxM2E2OTIxXkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/6yKDu5_ANc8"
        }, {
            id: "S4",
            name: "Vettaiyan",
            genre: "Action Drama",
            poster: "https://m.media-amazon.com/images/M/MV5BZWM5YzY2NDUtOGM5MC00OWM0LTg1NTQtYzQ5MmQ0MzU5ZWM3XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/6yKDu5_ANc8"
        }, {
            id: "S5",
            name: "Kanguva",
            genre: "Fantasy Action",
            poster: "https://m.media-amazon.com/images/M/MV5BZjQ2N2Y3Y2MtN2U1Yi00ODJmLWE0MDYtMTE0ODljZDNlMjU1XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_.jpg",
            trailer: "https://www.youtube.com/embed/6yKDu5_ANc8"
        }, {
            id: "S6",
            name: "Vidaamuyarchi",
            genre: "Action Thriller",
            poster: "https://m.media-amazon.com/images/M/MV5BNzQyY2FkMjktY2U0OC00Y2VlLThlMDItYTM5Y2M1NzI0NTU0XkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_FMjpg_UX1000_.jpg",
            trailer: "https://www.youtube.com/embed/6yKDu5_ANc8"
        }];

        const showtimes = [{
            id: "S1",
            movieId: "M1",
            time: "2025-10-24T18:30:00",
            rows: 6,
            cols: 8
        }, {
            id: "S2",
            movieId: "M1",
            time: "2025-10-25T21:00:00",
            rows: 6,
            cols: 8
        }, {
            id: "S3",
            movieId: "M2",
            time: "2025-10-24T20:30:00",
            rows: 6,
            cols: 8
        }, {
            id: "S4",
            movieId: "M3",
            time: "2025-10-25T18:00:00",
            rows: 6,
            cols: 8
        }, {
            id: "S5",
            movieId: "M4",
            time: "2025-10-26T19:30:00",
            rows: 6,
            cols: 8
        }, {
            id: "S6",
            movieId: "M5",
            time: "2025-10-26T22:00:00",
            rows: 6,
            cols: 8
        }, {
            id: "S7",
            movieId: "M6",
            time: "2025-10-27T18:30:00",
            rows: 6,
            cols: 8
        }, {
            id: "S8",
            movieId: "M7",
            time: "2025-10-27T21:00:00",
            rows: 6,
            cols: 8
        }];

        // Application state
        let currentState = {
            user: null,
            selectedMovie: null,
            selectedShowtime: null,
            selectedSeats: [],
            selectedPaymentMethod: null,
            booking: null
        };

        // Initialize the application
        function init() {
            renderMovies();
            renderSuggestions();
            setupSearchAndFilter();
            setupTrailerModal();
            // Pre-book some random seats for demo
            initializeSeatData();
        }

        function setupTrailerModal() {
            const modal = document.getElementById('trailerModal');
            const closeBtn = document.getElementById('closeTrailerModal');

            closeBtn.addEventListener('click', () => {
                modal.style.display = 'none';
                // Stop the video when modal is closed
                const iframe = document.getElementById('trailerVideo');
                iframe.src = '';
            });

            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    // Stop the video when modal is closed
                    const iframe = document.getElementById('trailerVideo');
                    iframe.src = '';
                }
            });
        }

        function playTrailer(movie) {
            const modal = document.getElementById('trailerModal');
            const iframe = document.getElementById('trailerVideo');
            const placeholder = document.getElementById('trailerPlaceholder');

            if (movie.trailer) {
                iframe.src = movie.trailer + '?autoplay=1';
                placeholder.classList.add('hidden');
                iframe.classList.remove('hidden');
            } else {
                iframe.classList.add('hidden');
                placeholder.classList.remove('hidden');
            }

            modal.style.display = 'flex';
        }

        function setupSearchAndFilter() {
            // Search functionality
            const searchInput = document.getElementById('searchMovies');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                filterMovies(searchTerm);
            });

            // Filter functionality
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');

                    const filter = this.getAttribute('data-filter');
                    filterMoviesByGenre(filter);
                });
            });
        }

        function filterMovies(searchTerm) {
            const movieCards = document.querySelectorAll('.movie-card');
            movieCards.forEach(card => {
                const movieName = card.querySelector('.movie-title').textContent.toLowerCase();
                if (movieName.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function filterMoviesByGenre(genre) {
            const movieCards = document.querySelectorAll('.movie-card');
            movieCards.forEach(card => {
                const movieGenre = card.getAttribute('data-genre');
                if (genre === 'all' || movieGenre === genre) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function renderMovies() {
            const moviesGrid = document.getElementById('moviesGrid');
            moviesGrid.innerHTML = '';

            movies.forEach(movie => {
                const movieCard = document.createElement('div');
                movieCard.className = 'movie-card';
                movieCard.setAttribute('data-genre', movie.genre.split(' ')[0]);
                movieCard.onclick = () => selectMovie(movie);

                movieCard.innerHTML = `
                    <div class="movie-poster">
                        <img src="${movie.poster}" alt="${movie.name}" onerror="handleImageError(this)">
                        ${movie.trending ? '<div class="movie-badge">Trending</div>' : ''}
                        <div class="movie-rating">‚≠ê ${movie.rating}/10</div>
                        <div class="movie-trailer" onclick="event.stopPropagation(); playTrailer(${JSON.stringify(movie).replace(/"/g, '&quot;')})">
                            <i class="fas fa-play-circle"></i> Watch Trailer
                        </div>
                    </div>
                    <div class="movie-info">
                        <div class="movie-title">${movie.name}</div>
                        <div class="movie-details">${movie.genre}</div>
                        <div class="movie-details">${movie.duration} mins</div>
                        <div class="movie-price">‚Çπ${movie.price}</div>
                    </div>
                `;

                moviesGrid.appendChild(movieCard);
            });
        }

        function renderSuggestions() {
            const suggestionsGrid = document.getElementById('suggestionsGrid');
            suggestionsGrid.innerHTML = '';

            suggestedMovies.forEach(movie => {
                const suggestionCard = document.createElement('div');
                suggestionCard.className = 'suggestion-card';
                suggestionCard.onclick = () => {
                    // Find and select the corresponding movie if it exists
                    const mainMovie = movies.find(m => m.name === movie.name);
                    if (mainMovie) {
                        selectMovieFromSuggestion(mainMovie);
                    } else {
                        // Show trailer for suggested movie
                        playTrailer(movie);
                    }
                };

                suggestionCard.innerHTML = `
                    <div class="suggestion-poster">
                        <img src="${movie.poster}" alt="${movie.name}" onerror="handleImageError(this)">
                    </div>
                    <div class="suggestion-info">
                        <div class="suggestion-title">${movie.name}</div>
                        <div class="suggestion-genre">${movie.genre}</div>
                        <button class="suggestion-trailer" onclick="event.stopPropagation(); playTrailer(${JSON.stringify(movie).replace(/"/g, '&quot;')})">
                            <i class="fas fa-play"></i> Watch Trailer
                        </button>
                    </div>
                `;

                suggestionsGrid.appendChild(suggestionCard);
            });
        }

        function selectMovieFromSuggestion(movie) {
            // Find the movie card in the main grid and select it
            const movieCards = document.querySelectorAll('.movie-card');
            movieCards.forEach(card => {
                if (card.querySelector('.movie-title').textContent === movie.name) {
                    card.click();
                    // Scroll to the selected movie
                    card.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            });
        }

        // Image error handling
        function handleImageError(img) {
            // Create a fallback with movie name and icon
            const fallbackHTML = `
                <div class="image-fallback">
                    <i class="fas fa-film"></i>
                    <div>${img.alt}</div>
                </div>
            `;
            img.outerHTML = fallbackHTML;

            // Also log the error for debugging
            console.error(`Failed to load image: ${img.src}`);
        }

        function selectMovie(movie) {
            // Remove selection from all movies
            document.querySelectorAll('.movie-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Add selection to clicked movie
            event.currentTarget.classList.add('selected');

            currentState.selectedMovie = movie;
            document.getElementById('btnContinueShowtimes').disabled = false;

            // Update selected movie info
            document.getElementById('selectedMovieInfo').innerHTML = `
                <div class="summary-item">
                    <span class="summary-label">Movie:</span>
                    <span class="summary-value">${movie.name}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Genre:</span>
                    <span class="summary-value">${movie.genre}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Duration:</span>
                    <span class="summary-value">${movie.duration} mins</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Price per seat:</span>
                    <span class="summary-value">‚Çπ${movie.price}</span>
                </div>
            `;

            renderShowtimes(movie.id);
        }

        function renderShowtimes(movieId) {
            const showtimesList = document.getElementById('showtimesList');
            showtimesList.innerHTML = '';

            const filteredShowtimes = showtimes.filter(st => st.movieId === movieId);

            if (filteredShowtimes.length === 0) {
                showtimesList.innerHTML = '<p>No showtimes available for this movie.</p>';
                return;
            }

            filteredShowtimes.forEach(showtime => {
                const showtimeItem = document.createElement('div');
                showtimeItem.className = 'showtime-item';
                showtimeItem.onclick = () => selectShowtime(showtime);

                const date = new Date(showtime.time);
                const formattedDate = date.toLocaleDateString('en-IN', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                const formattedTime = date.toLocaleTimeString('en-IN', {
                    hour: '2-digit',
                    minute: '2-digit'
                });

                showtimeItem.innerHTML = `
                    <strong>${formattedDate}</strong><br>
                    <span>${formattedTime}</span><br>
                    <small>${showtime.rows * showtime.cols} seats available</small>
                `;

                showtimesList.appendChild(showtimeItem);
            });
        }

        function selectShowtime(showtime) {
            // Remove selection from all showtimes
            document.querySelectorAll('.showtime-item').forEach(item => {
                item.classList.remove('selected');
            });

            // Add selection to clicked showtime
            event.currentTarget.classList.add('selected');

            currentState.selectedShowtime = showtime;
            document.getElementById('btnContinueSeats').disabled = false;

            // Update selected showtime info
            const date = new Date(showtime.time);
            const formattedDateTime = date.toLocaleString('en-IN', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            document.getElementById('selectedShowtimeInfo').innerHTML = `
                <div class="summary-item">
                    <span class="summary-label">Movie:</span>
                    <span class="summary-value">${currentState.selectedMovie.name}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Showtime:</span>
                    <span class="summary-value">${formattedDateTime}</span>
                </div>
            `;

            renderSeats(showtime);
        }

        function renderSeats(showtime) {
            const seatsGrid = document.getElementById('seatsGrid');
            seatsGrid.innerHTML = '';

            // Get seat data from localStorage or initialize
            const seatKey = `seats_${showtime.id}`;
            let seatData = JSON.parse(localStorage.getItem(seatKey));

            if (!seatData) {
                seatData = initializeSeats(showtime.rows, showtime.cols);
                localStorage.setItem(seatKey, JSON.stringify(seatData));
            }

            for (let row = 0; row < showtime.rows; row++) {
                const seatRow = document.createElement('div');
                seatRow.className = 'seat-row';

                for (let col = 0; col < showtime.cols; col++) {
                    const seat = document.createElement('div');
                    const seatId = `R${row + 1}C${col + 1}`;
                    const isBooked = seatData[row][col];

                    seat.className = `seat ${isBooked ? 'booked' : 'available'}`;
                    seat.textContent = seatId;
                    seat.dataset.row = row;
                    seat.dataset.col = col;

                    if (!isBooked) {
                        seat.onclick = () => toggleSeatSelection(seat, row, col);
                    }

                    seatRow.appendChild(seat);
                }

                seatsGrid.appendChild(seatRow);
            }
        }

        function initializeSeats(rows, cols) {
            const seats = Array(rows).fill().map(() => Array(cols).fill(false));

            // Randomly book some seats for demo
            const totalSeats = rows * cols;
            const seatsToBook = Math.floor(Math.random() * (totalSeats * 0.3)); // Book up to 30% of seats

            for (let i = 0; i < seatsToBook; i++) {
                const row = Math.floor(Math.random() * rows);
                const col = Math.floor(Math.random() * cols);
                seats[row][col] = true;
            }

            return seats;
        }

        function initializeSeatData() {
            showtimes.forEach(showtime => {
                const seatKey = `seats_${showtime.id}`;
                if (!localStorage.getItem(seatKey)) {
                    const seatData = initializeSeats(showtime.rows, showtime.cols);
                    localStorage.setItem(seatKey, JSON.stringify(seatData));
                }
            });
        }

        function toggleSeatSelection(seatElement, row, col) {
            const seatId = `R${row + 1}C${col + 1}`;
            const index = currentState.selectedSeats.indexOf(seatId);

            if (index === -1) {
                // Select seat
                currentState.selectedSeats.push(seatId);
                seatElement.classList.add('selected');
            } else {
                // Deselect seat
                currentState.selectedSeats.splice(index, 1);
                seatElement.classList.remove('selected');
            }

            // Update payment button state
            document.getElementById('btnContinuePayment').disabled = currentState.selectedSeats.length === 0;

            // Update booking summary
            updateBookingSummary();
        }

        function updateBookingSummary() {
            const totalPrice = currentState.selectedSeats.length * currentState.selectedMovie.price;

            document.getElementById('bookingSummary').innerHTML = `
                <div class="summary-item">
                    <span class="summary-label">Movie:</span>
                    <span class="summary-value">${currentState.selectedMovie.name}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Showtime:</span>
                    <span class="summary-value">${new Date(currentState.selectedShowtime.time).toLocaleString()}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Selected Seats:</span>
                    <span class="summary-value">${currentState.selectedSeats.join(', ')}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Number of Seats:</span>
                    <span class="summary-value">${currentState.selectedSeats.length}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Total Amount:</span>
                    <span class="summary-value" style="font-weight: bold; color: #667eea; font-size: 1.2em;">‚Çπ${totalPrice}</span>
                </div>
            `;
        }

        function selectPaymentMethod(method) {
            // Remove selection from all payment methods
            document.querySelectorAll('.payment-method').forEach(item => {
                item.classList.remove('selected');
            });

            // Add selection to clicked payment method
            event.currentTarget.classList.add('selected');

            currentState.selectedPaymentMethod = method;
            document.getElementById('btnProcessPayment').disabled = false;
        }

        function processPayment() {
            const paymentProcessing = document.getElementById('paymentProcessing');
            const btnProcessPayment = document.getElementById('btnProcessPayment');

            btnProcessPayment.disabled = true;
            paymentProcessing.classList.remove('hidden');

            // Simulate payment processing
            setTimeout(() => {
                paymentProcessing.classList.add('hidden');
                completeBooking();
            }, 3000);
        }

        function completeBooking() {
            // Update seat data in localStorage
            const seatKey = `seats_${currentState.selectedShowtime.id}`;
            const seatData = JSON.parse(localStorage.getItem(seatKey));

            currentState.selectedSeats.forEach(seat => {
                const row = parseInt(seat.substring(1, 2)) - 1;
                const col = parseInt(seat.substring(3, 4)) - 1;
                seatData[row][col] = true;
            });

            localStorage.setItem(seatKey, JSON.stringify(seatData));

            // Create booking object
            const totalPrice = currentState.selectedSeats.length * currentState.selectedMovie.price;
            currentState.booking = {
                id: 'BK' + Date.now(),
                user: currentState.user,
                movie: currentState.selectedMovie,
                showtime: currentState.selectedShowtime,
                seats: currentState.selectedSeats,
                totalPrice: totalPrice,
                bookingTime: new Date().toISOString(),
                paymentMethod: currentState.selectedPaymentMethod
            };

            // Save booking to localStorage
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            bookings.push(currentState.booking);
            localStorage.setItem('bookings', JSON.stringify(bookings));

            showConfirmation();
        }

        function showConfirmation() {
            const confirmationDetails = document.getElementById('confirmationDetails');
            const booking = currentState.booking;

            confirmationDetails.innerHTML = `
                <div class="booking-summary">
                    <div class="summary-item">
                        <span class="summary-label">Booking ID:</span>
                        <span class="summary-value">${booking.id}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Customer:</span>
                        <span class="summary-value">${booking.user.name}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Movie:</span>
                        <span class="summary-value">${booking.movie.name}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Showtime:</span>
                        <span class="summary-value">${new Date(booking.showtime.time).toLocaleString()}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Seats:</span>
                        <span class="summary-value">${booking.seats.join(', ')}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Total Amount:</span>
                        <span class="summary-value">‚Çπ${booking.totalPrice}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Payment Method:</span>
                        <span class="summary-value">${booking.paymentMethod.toUpperCase()}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Booking Time:</span>
                        <span class="summary-value">${new Date(booking.bookingTime).toLocaleString()}</span>
                    </div>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 8px;">
                    <h4 style="color: #2e7d32; margin-bottom: 10px;">üìß Email and SMS notifications have been sent!</h4>
                    <p>Thank you for your booking. Your tickets have been confirmed.</p>
                </div>
            `;

            // Generate QR code (simulated)
            generateQRCode();

            // Show recommendations
            showRecommendations();

            showStep('step-confirmation');
            showNotification('Booking confirmed successfully!', 'success');
        }

        function generateQRCode() {
            const qrCodeContainer = document.getElementById('qrCodeContainer');
            const booking = currentState.booking;

            // In a real app, you would generate a QR code with the booking details
            // For this demo, we'll create a simple representation
            qrCodeContainer.innerHTML = `
                <div style="display: inline-block; padding: 20px; background: white; border-radius: 8px;">
                    <div style="font-family: monospace; line-height: 1;">
                        <div>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</div>
                        <div>‚ñà‚ñà          ‚ñà‚ñà</div>
                        <div>‚ñà‚ñà  ${booking.id}  ‚ñà‚ñà</div>
                        <div>‚ñà‚ñà          ‚ñà‚ñà</div>
                        <div>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</div>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Scan at theater entrance</p>
                </div>
            `;
        }

        function showRecommendations() {
            const recommendationsGrid = document.getElementById('recommendationsGrid');
            recommendationsGrid.innerHTML = '';

            // Get recommendations based on the selected movie's genre
            const currentGenre = currentState.selectedMovie.genre.split(' ')[0];
            const recommendations = movies
                .filter(movie =>
                    movie.id !== currentState.selectedMovie.id &&
                    movie.genre.includes(currentGenre))
                .slice(0, 4);

            if (recommendations.length === 0) {
                // If no same genre movies, show trending movies
                recommendations.push(...movies.filter(movie =>
                        movie.id !== currentState.selectedMovie.id && movie.trending)
                    .slice(0, 4));
            }

            recommendations.forEach(movie => {
                const recCard = document.createElement('div');
                recCard.className = 'recommendation-card';
                recCard.onclick = () => {
                    startNewBooking();
                    // In a real app, you would select this movie
                    setTimeout(() => {
                        const movieCards = document.querySelectorAll('.movie-card');
                        movieCards.forEach(card => {
                            if (card.querySelector('.movie-title').textContent === movie.name) {
                                card.click();
                            }
                        });
                    }, 100);
                };

                recCard.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.name}" onerror="handleImageError(this)">
                `;

                recommendationsGrid.appendChild(recCard);
            });
        }

        function validateUserInfo() {
            const name = document.getElementById('userName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const phone = document.getElementById('userPhone').value.trim();

            if (!name || !email || !phone) {
                showNotification('Please fill in all user information fields.', 'error');
                return;
            }

            if (!validateEmail(email)) {
                showNotification('Please enter a valid email address.', 'error');
                return;
            }

            if (!validatePhone(phone)) {
                showNotification('Please enter a valid phone number.', 'error');
                return;
            }

            currentState.user = {
                name,
                email,
                phone
            };
            showStep('step-movies');
            showNotification('User information saved successfully!', 'success');
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            const re = /^\d{10}$/;
            return re.test(phone);
        }

        function showStep(stepId) {
            // Hide all steps
            document.querySelectorAll('[id^="step-"]').forEach(step => {
                step.classList.add('hidden');
            });

            // Show the requested step
            document.getElementById(stepId).classList.remove('hidden');
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function startNewBooking() {
            // Reset state
            currentState = {
                user: currentState.user, // Keep user info
                selectedMovie: null,
                selectedShowtime: null,
                selectedSeats: [],
                selectedPaymentMethod: null,
                booking: null
            };

            // Reset form
            document.querySelectorAll('.movie-card, .showtime-item, .payment-method').forEach(item => {
                item.classList.remove('selected');
            });

            document.querySelectorAll('.seat').forEach(seat => {
                seat.classList.remove('selected');
            });

            document.getElementById('btnContinueShowtimes').disabled = true;
            document.getElementById('btnContinueSeats').disabled = true;
            document.getElementById('btnContinuePayment').disabled = true;
            document.getElementById('btnProcessPayment').disabled = true;

            showStep('step-movies');
        }

        // Initialize the application when the page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
